"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PayForAdoptionService = void 0;
const ecs = require("aws-cdk-lib/aws-ecs");
const aws_ecr_assets_1 = require("aws-cdk-lib/aws-ecr-assets");
const ecs_service_1 = require("./ecs-service");
class PayForAdoptionService extends ecs_service_1.EcsService {
    constructor(scope, id, props) {
        super(scope, id, props);
        props.database.secret?.grantRead(this.taskDefinition.taskRole);
    }
    containerImageFromRepository(repositoryURI) {
        return ecs.ContainerImage.fromRegistry(`${repositoryURI}/pet-payforadoption:latest`);
    }
    createContainerImage() {
        return ecs.ContainerImage.fromDockerImageAsset(new aws_ecr_assets_1.DockerImageAsset(this, "pay-for-adoption", {
            directory: "./resources/microservices/payforadoption-go"
        }));
    }
}
exports.PayForAdoptionService = PayForAdoptionService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5LWZvci1hZG9wdGlvbi1zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGF5LWZvci1hZG9wdGlvbi1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUEyQztBQUUzQywrREFBOEQ7QUFDOUQsK0NBQTJEO0FBTzNELE1BQWEscUJBQXNCLFNBQVEsd0JBQVU7SUFFbkQsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFpQztRQUN6RSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsNEJBQTRCLENBQUMsYUFBcUI7UUFDaEQsT0FBTyxHQUFHLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxHQUFHLGFBQWEsNEJBQTRCLENBQUMsQ0FBQTtJQUN0RixDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLE9BQU8sR0FBRyxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLGlDQUFnQixDQUFDLElBQUksRUFBQyxrQkFBa0IsRUFBRTtZQUMzRixTQUFTLEVBQUUsNkNBQTZDO1NBQ3pELENBQUMsQ0FBQyxDQUFBO0lBQ0wsQ0FBQztDQUNGO0FBakJELHNEQWlCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGVjcyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWNzJztcclxuaW1wb3J0ICogYXMgcmRzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1yZHMnO1xyXG5pbXBvcnQgeyBEb2NrZXJJbWFnZUFzc2V0IH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjci1hc3NldHMnO1xyXG5pbXBvcnQgeyBFY3NTZXJ2aWNlLCBFY3NTZXJ2aWNlUHJvcHMgfSBmcm9tICcuL2Vjcy1zZXJ2aWNlJ1xyXG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQYXlGb3JBZG9wdGlvblNlcnZpY2VQcm9wcyBleHRlbmRzIEVjc1NlcnZpY2VQcm9wcyB7XHJcbiAgZGF0YWJhc2U6IHJkcy5EYXRhYmFzZUNsdXN0ZXJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBheUZvckFkb3B0aW9uU2VydmljZSBleHRlbmRzIEVjc1NlcnZpY2Uge1xyXG5cclxuICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogUGF5Rm9yQWRvcHRpb25TZXJ2aWNlUHJvcHMpIHtcclxuICAgIHN1cGVyKHNjb3BlLCBpZCwgcHJvcHMpO1xyXG5cclxuICAgIHByb3BzLmRhdGFiYXNlLnNlY3JldD8uZ3JhbnRSZWFkKHRoaXMudGFza0RlZmluaXRpb24udGFza1JvbGUpO1xyXG4gIH1cclxuXHJcbiAgY29udGFpbmVySW1hZ2VGcm9tUmVwb3NpdG9yeShyZXBvc2l0b3J5VVJJOiBzdHJpbmcpIDogZWNzLkNvbnRhaW5lckltYWdlIHtcclxuICAgIHJldHVybiBlY3MuQ29udGFpbmVySW1hZ2UuZnJvbVJlZ2lzdHJ5KGAke3JlcG9zaXRvcnlVUkl9L3BldC1wYXlmb3JhZG9wdGlvbjpsYXRlc3RgKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ29udGFpbmVySW1hZ2UoKSA6IGVjcy5Db250YWluZXJJbWFnZSB7XHJcbiAgICByZXR1cm4gZWNzLkNvbnRhaW5lckltYWdlLmZyb21Eb2NrZXJJbWFnZUFzc2V0KG5ldyBEb2NrZXJJbWFnZUFzc2V0KHRoaXMsXCJwYXktZm9yLWFkb3B0aW9uXCIsIHtcclxuICAgICAgZGlyZWN0b3J5OiBcIi4vcmVzb3VyY2VzL21pY3Jvc2VydmljZXMvcGF5Zm9yYWRvcHRpb24tZ29cIlxyXG4gICAgfSkpXHJcbiAgfVxyXG59XHJcbiJdfQ==